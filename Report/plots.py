
import matplotlib.pyplot as plt
import json
import numpy as np

# Data extracted from your provided logs
log_data_str = """[{'epoch': 1, 'loss': 4.576409657796224, 'bleu_score': -1.0}, {'epoch': 2, 'loss': 4.000553957621256, 'bleu_score': -1.0}, {'epoch': 3, 'loss': 3.8770883083343506, 'bleu_score': -1.0}, {'epoch': 4, 'loss': 3.7290550549825032, 'bleu_score': -1.0}, {'epoch': 5, 'loss': 3.7183905124664305, 'bleu_score': 0.0}, {'epoch': 6, 'loss': 3.787165911992391, 'bleu_score': -1.0}, {'epoch': 7, 'loss': 3.710849571228027, 'bleu_score': -1.0}, {'epoch': 8, 'loss': 3.6607239405314127, 'bleu_score': -1.0}, {'epoch': 9, 'loss': 3.581350088119507, 'bleu_score': -1.0}, {'epoch': 10, 'loss': 3.5883800983428955, 'bleu_score': 0.007795274631335565}, {'epoch': 11, 'loss': 3.5193318049112956, 'bleu_score': -1.0}, {'epoch': 12, 'loss': 3.5203697522481283, 'bleu_score': -1.0}, {'epoch': 13, 'loss': 3.519430176417033, 'bleu_score': -1.0}, {'epoch': 14, 'loss': 3.4331273873647055, 'bleu_score': -1.0}, {'epoch': 15, 'loss': 3.5104683081309003, 'bleu_score': 0.007742061455594695}, {'epoch': 16, 'loss': 3.5015594641367596, 'bleu_score': -1.0}, {'epoch': 17, 'loss': 3.3584830284118654, 'bleu_score': -1.0}, {'epoch': 18, 'loss': 3.4027748743693036, 'bleu_score': -1.0}, {'epoch': 19, 'loss': 3.444538116455078, 'bleu_score': -1.0}, {'epoch': 20, 'loss': 3.2710935274759927, 'bleu_score': 0.007256454925845499}, {'epoch': 21, 'loss': 3.3253738562266033, 'bleu_score': -1.0}, {'epoch': 22, 'loss': 3.2641273657480876, 'bleu_score': -1.0}, {'epoch': 23, 'loss': 3.2243525187174478, 'bleu_score': -1.0}, {'epoch': 24, 'loss': 3.2318266073862714, 'bleu_score': -1.0}, {'epoch': 25, 'loss': 3.2568266868591307, 'bleu_score': 0.010322616563616058}, {'epoch': 26, 'loss': 3.2088133811950685, 'bleu_score': -1.0}, {'epoch': 27, 'loss': 3.170428657531738, 'bleu_score': -1.0}, {'epoch': 28, 'loss': 3.2063509464263915, 'bleu_score': -1.0}, {'epoch': 29, 'loss': 3.068002875645955, 'bleu_score': -1.0}, {'epoch': 30, 'loss': 3.153630590438843, 'bleu_score': 0.007797568274946401}, {'epoch': 31, 'loss': 3.0762542406717936, 'bleu_score': -1.0}, {'epoch': 32, 'loss': 3.0109422127405803, 'bleu_score': -1.0}, {'epoch': 33, 'loss': 3.0510423024495443, 'bleu_score': -1.0}, {'epoch': 34, 'loss': 3.0141297817230224, 'bleu_score': -1.0}, {'epoch': 35, 'loss': 3.0322508335113527, 'bleu_score': 0.008244924618644142}, {'epoch': 36, 'loss': 2.897985029220581, 'bleu_score': -1.0}, {'epoch': 37, 'loss': 2.80485159556071, 'bleu_score': -1.0}, {'epoch': 38, 'loss': 2.9134714285532635, 'bleu_score': -1.0}, {'epoch': 39, 'loss': 2.8084447542826334, 'bleu_score': -1.0}, {'epoch': 40, 'loss': 2.8614271799723308, 'bleu_score': 0.007319138230334801}, {'epoch': 41, 'loss': 2.7848517497380576, 'bleu_score': -1.0}, {'epoch': 42, 'loss': 2.786825195948283, 'bleu_score': -1.0}, {'epoch': 43, 'loss': 2.724115554491679, 'bleu_score': -1.0}, {'epoch': 44, 'loss': 2.788776969909668, 'bleu_score': -1.0}, {'epoch': 45, 'loss': 2.7243851025899253, 'bleu_score': 0.015138514598766055}, {'epoch': 46, 'loss': 2.692247772216797, 'bleu_score': -1.0}, {'epoch': 47, 'loss': 2.645847686131795, 'bleu_score': -1.0}, {'epoch': 48, 'loss': 2.679580020904541, 'bleu_score': -1.0}, {'epoch': 49, 'loss': 2.589713788032532, 'bleu_score': -1.0}, {'epoch': 50, 'loss': 2.5696039756139117, 'bleu_score': 0.013015472814233087}, {'epoch': 51, 'loss': 2.6858057022094726, 'bleu_score': -1.0}, {'epoch': 52, 'loss': 2.5404338041941323, 'bleu_score': -1.0}, {'epoch': 53, 'loss': 2.558609406153361, 'bleu_score': -1.0}, {'epoch': 54, 'loss': 2.6517971674601237, 'bleu_score': -1.0}, {'epoch': 55, 'loss': 2.6075868606567383, 'bleu_score': 0.007319138230334801}, {'epoch': 56, 'loss': 2.524812698364258, 'bleu_score': -1.0}, {'epoch': 57, 'loss': 2.5164071798324583, 'bleu_score': -1.0}, {'epoch': 58, 'loss': 2.489160998662313, 'bleu_score': -1.0}, {'epoch': 59, 'loss': 2.4574576377868653, 'bleu_score': -1.0}, {'epoch': 60, 'loss': 2.460362672805786, 'bleu_score': 0.013015472814233087}, {'epoch': 61, 'loss': 2.4179482221603394, 'bleu_score': -1.0}, {'epoch': 62, 'loss': 2.488950332005819, 'bleu_score': -1.0}, {'epoch': 63, 'loss': 2.4149073362350464, 'bleu_score': -1.0}, {'epoch': 64, 'loss': 2.450399939219157, 'bleu_score': -1.0}, {'epoch': 65, 'loss': 2.4032769123713176, 'bleu_score': 0.013371598070651018}, {'epoch': 66, 'loss': 2.331994819641113, 'bleu_score': -1.0}, {'epoch': 67, 'loss': 2.372943886121114, 'bleu_score': -1.0}, {'epoch': 68, 'loss': 2.3642338196436565, 'bleu_score': -1.0}, {'epoch': 69, 'loss': 2.357054328918457, 'bleu_score': -1.0}, {'epoch': 70, 'loss': 2.293033480644226, 'bleu_score': 0.014368717227151264}, {'epoch': 71, 'loss': 2.291637984911601, 'bleu_score': -1.0}, {'epoch': 72, 'loss': 2.306252121925354, 'bleu_score': -1.0}, {'epoch': 73, 'loss': 2.2914985020955405, 'bleu_score': -1.0}, {'epoch': 74, 'loss': 2.2559192021687826, 'bleu_score': -1.0}, {'epoch': 75, 'loss': 2.2273807366689047, 'bleu_score': 0.018093428211808114}, {'epoch': 76, 'loss': 2.15977787176768, 'bleu_score': -1.0}, {'epoch': 77, 'loss': 2.1786471684773763, 'bleu_score': -1.0}, {'epoch': 78, 'loss': 2.175896326700846, 'bleu_score': -1.0}, {'epoch': 79, 'loss': 2.1867403030395507, 'bleu_score': -1.0}, {'epoch': 80, 'loss': 2.155160641670227, 'bleu_score': 0.015403119935626078}, {'epoch': 81, 'loss': 2.1575247128804524, 'bleu_score': -1.0}, {'epoch': 82, 'loss': 2.1279199600219725, 'bleu_score': -1.0}, {'epoch': 83, 'loss': 2.193951980272929, 'bleu_score': -1.0}, {'epoch': 84, 'loss': 2.1294509172439575, 'bleu_score': -1.0}, {'epoch': 85, 'loss': 2.1562735478083295, 'bleu_score': 0.013151738044561136}, {'epoch': 86, 'loss': 2.0934914032618206, 'bleu_score': -1.0}, {'epoch': 87, 'loss': 2.130490199724833, 'bleu_score': -1.0}, {'epoch': 88, 'loss': 2.0988690773646037, 'bleu_score': -1.0}, {'epoch': 89, 'loss': 2.0453991095225015, 'bleu_score': -1.0}, {'epoch': 90, 'loss': 2.0303861538569135, 'bleu_score': 0.01759801273242948}, {'epoch': 91, 'loss': 2.0588778336842855, 'bleu_score': -1.0}, {'epoch': 92, 'loss': 2.0686134338378905, 'bleu_score': -1.0}, {'epoch': 93, 'loss': 1.985005005200704, 'bleu_score': -1.0}, {'epoch': 94, 'loss': 2.0220852375030516, 'bleu_score': -1.0}, {'epoch': 95, 'loss': 2.0551692247390747, 'bleu_score': 0.008307593389881981}, {'epoch': 96, 'loss': 2.0300766309102376, 'bleu_score': -1.0}, {'epoch': 97, 'loss': 2.045681055386861, 'bleu_score': -1.0}, {'epoch': 98, 'loss': 1.9713774998982747, 'bleu_score': -1.0}, {'epoch': 99, 'loss': 1.9299142599105834, 'bleu_score': -1.0}, {'epoch': 100, 'loss': 1.951598342259725, 'bleu_score': 0.0076067062757281265}, {'epoch': 101, 'loss': 1.9365923007329304, 'bleu_score': -1.0}, {'epoch': 102, 'loss': 1.9796992619832356, 'bleu_score': -1.0}, {'epoch': 103, 'loss': 1.970632537206014, 'bleu_score': -1.0}, {'epoch': 104, 'loss': 1.8822438796361287, 'bleu_score': -1.0}, {'epoch': 105, 'loss': 1.9035340150197346, 'bleu_score': 0.008165096453956038}, {'epoch': 106, 'loss': 1.8622873226801555, 'bleu_score': -1.0}, {'epoch': 107, 'loss': 1.8796106974283855, 'bleu_score': -1.0}, {'epoch': 108, 'loss': 1.8805811564127604, 'bleu_score': -1.0}, {'epoch': 109, 'loss': 1.8967286825180054, 'bleu_score': -1.0}, {'epoch': 110, 'loss': 1.826689648628235, 'bleu_score': 0.08120876662566007}, {'epoch': 111, 'loss': 1.8671877225240072, 'bleu_score': -1.0}, {'epoch': 112, 'loss': 1.802906624476115, 'bleu_score': -1.0}, {'epoch': 113, 'loss': 1.810096017519633, 'bleu_score': -1.0}, {'epoch': 114, 'loss': 1.7546189308166504, 'bleu_score': -1.0}, {'epoch': 115, 'loss': 1.737143325805664, 'bleu_score': 0.007967029608176046}, {'epoch': 116, 'loss': 1.7551395098368328, 'bleu_score': -1.0}, {'epoch': 117, 'loss': 1.7242600679397584, 'bleu_score': -1.0}, {'epoch': 118, 'loss': 1.8456863244374593, 'bleu_score': -1.0}, {'epoch': 119, 'loss': 1.701440938313802, 'bleu_score': -1.0}, {'epoch': 120, 'loss': 1.7245603799819946, 'bleu_score': 0.033098038777799293}, {'epoch': 121, 'loss': 1.693117117881775, 'bleu_score': -1.0}, {'epoch': 122, 'loss': 1.719376564025879, 'bleu_score': -1.0}, {'epoch': 123, 'loss': 1.686546754837036, 'bleu_score': -1.0}, {'epoch': 124, 'loss': 1.6456263144810994, 'bleu_score': -1.0}, {'epoch': 125, 'loss': 1.6430278062820434, 'bleu_score': 0.07680469235920007}, {'epoch': 126, 'loss': 1.6220853328704834, 'bleu_score': -1.0}, {'epoch': 127, 'loss': 1.628839095433553, 'bleu_score': -1.0}, {'epoch': 128, 'loss': 1.6891085863113404, 'bleu_score': -1.0}, {'epoch': 129, 'loss': 1.6201937794685364, 'bleu_score': -1.0}, {'epoch': 130, 'loss': 1.5975901206334433, 'bleu_score': 0.07955211710019439}, {'epoch': 131, 'loss': 1.6833351055781047, 'bleu_score': -1.0}, {'epoch': 132, 'loss': 1.5939337611198425, 'bleu_score': -1.0}, {'epoch': 133, 'loss': 1.6398746649424234, 'bleu_score': -1.0}, {'epoch': 134, 'loss': 1.6124127546946208, 'bleu_score': -1.0}, {'epoch': 135, 'loss': 1.5967583696047465, 'bleu_score': 0.0845694117191406}, {'epoch': 136, 'loss': 1.5369106610616048, 'bleu_score': -1.0}, {'epoch': 137, 'loss': 1.4915151476860047, 'bleu_score': -1.0}, {'epoch': 138, 'loss': 1.586304986476898, 'bleu_score': -1.0}, {'epoch': 139, 'loss': 1.4888374010721843, 'bleu_score': -1.0}, {'epoch': 140, 'loss': 1.6325928529103597, 'bleu_score': 0.007458014169176072}, {'epoch': 141, 'loss': 1.4127973318099976, 'bleu_score': -1.0}, {'epoch': 142, 'loss': 1.4838247696558635, 'bleu_score': -1.0}, {'epoch': 143, 'loss': 1.4833441336949666, 'bleu_score': -1.0}, {'epoch': 144, 'loss': 1.401883057753245, 'bleu_score': -1.0}, {'epoch': 145, 'loss': 1.4873863855997722, 'bleu_score': 0.06652242964119032}, {'epoch': 146, 'loss': 1.4750268737475076, 'bleu_score': -1.0}, {'epoch': 147, 'loss': 1.4739458203315734, 'bleu_score': -1.0}, {'epoch': 148, 'loss': 1.4910131096839905, 'bleu_score': -1.0}, {'epoch': 149, 'loss': 1.4297016859054565, 'bleu_score': -1.0}, {'epoch': 150, 'loss': 1.3787612636884055, 'bleu_score': 0.08036294016793065}, {'epoch': 151, 'loss': 1.393466305732727, 'bleu_score': -1.0}, {'epoch': 152, 'loss': 1.3850724816322326, 'bleu_score': -1.0}, {'epoch': 153, 'loss': 1.3580303986867268, 'bleu_score': -1.0}, {'epoch': 154, 'loss': 1.4136235952377318, 'bleu_score': -1.0}, {'epoch': 155, 'loss': 1.2621111750602723, 'bleu_score': 0.10505210643614252}, {'epoch': 156, 'loss': 1.4192116340001424, 'bleu_score': -1.0}, {'epoch': 157, 'loss': 1.329663066069285, 'bleu_score': -1.0}, {'epoch': 158, 'loss': 1.3930511474609375, 'bleu_score': -1.0}, {'epoch': 159, 'loss': 1.273309552669525, 'bleu_score': -1.0}, {'epoch': 160, 'loss': 1.3002904494603476, 'bleu_score': 0.12669149534934904}, {'epoch': 161, 'loss': 1.278883202870687, 'bleu_score': -1.0}, {'epoch': 162, 'loss': 1.3205800811449686, 'bleu_score': -1.0}, {'epoch': 163, 'loss': 1.3045273760954539, 'bleu_score': -1.0}, {'epoch': 164, 'loss': 1.3378432432810465, 'bleu_score': -1.0}, {'epoch': 165, 'loss': 1.360251748561859, 'bleu_score': 0.1365958393596228}, {'epoch': 166, 'loss': 1.2376413544019063, 'bleu_score': -1.0}, {'epoch': 167, 'loss': 1.1890546043713888, 'bleu_score': -1.0}, {'epoch': 168, 'loss': 1.2080973982810974, 'bleu_score': -1.0}, {'epoch': 169, 'loss': 1.182253352801005, 'bleu_score': -1.0}, {'epoch': 170, 'loss': 1.250797430674235, 'bleu_score': 0.16389438191428674}, {'epoch': 171, 'loss': 1.2416150450706482, 'bleu_score': -1.0}, {'epoch': 172, 'loss': 1.2099900563557944, 'bleu_score': -1.0}, {'epoch': 173, 'loss': 1.1911749800046285, 'bleu_score': -1.0}, {'epoch': 174, 'loss': 1.2114852329095205, 'bleu_score': -1.0}, {'epoch': 175, 'loss': 1.161195409297943, 'bleu_score': 0.12306030928563981}, {'epoch': 176, 'loss': 1.1163569291432698, 'bleu_score': -1.0}, {'epoch': 177, 'loss': 1.1426183462142945, 'bleu_score': -1.0}, {'epoch': 178, 'loss': 1.154592494169871, 'bleu_score': -1.0}, {'epoch': 179, 'loss': 1.190410606066386, 'bleu_score': -1.0}, {'epoch': 180, 'loss': 1.1226385951042175, 'bleu_score': 0.20173259755113235}, {'epoch': 181, 'loss': 1.146894347667694, 'bleu_score': -1.0}, {'epoch': 182, 'loss': 1.1084416826566061, 'bleu_score': -1.0}, {'epoch': 183, 'loss': 1.0750262558460235, 'bleu_score': -1.0}, {'epoch': 184, 'loss': 1.031288703282674, 'bleu_score': -1.0}, {'epoch': 185, 'loss': 1.0510536233584087, 'bleu_score': 0.19997125216351216}, {'epoch': 186, 'loss': 1.0757887363433838, 'bleu_score': -1.0}, {'epoch': 187, 'loss': 1.106396480401357, 'bleu_score': -1.0}, {'epoch': 188, 'loss': 1.0972966611385346, 'bleu_score': -1.0}, {'epoch': 189, 'loss': 1.011503565311432, 'bleu_score': -1.0}, {'epoch': 190, 'loss': 1.018358019987742, 'bleu_score': 0.14114303102965037}, {'epoch': 191, 'loss': 0.915165223677953, 'bleu_score': -1.0}, {'epoch': 192, 'loss': 1.0192389130592345, 'bleu_score': -1.0}, {'epoch': 193, 'loss': 1.005062468846639, 'bleu_score': -1.0}, {'epoch': 194, 'loss': 1.0109109997749328, 'bleu_score': -1.0}, {'epoch': 195, 'loss': 1.025704554716746, 'bleu_score': 0.20284927599752323}, {'epoch': 196, 'loss': 0.9825339277585348, 'bleu_score': -1.0}, {'epoch': 197, 'loss': 1.0310654044151306, 'bleu_score': -1.0}, {'epoch': 198, 'loss': 0.8949529230594635, 'bleu_score': -1.0}, {'epoch': 199, 'loss': 0.9567507068316142, 'bleu_score': -1.0}, {'epoch': 200, 'loss': 0.877427613735199, 'bleu_score': 0.14965975078050625}]"""
log_data = json.loads(log_data_str)

# Filter out the -1.0 values for plotting BLEU score
bleu_data = [d for d in log_data if d['bleu_score'] != -1.0]

# Sample every 10th epoch for both loss and BLEU score
epochs_sampled = [d['epoch'] for d in log_data if d['epoch'] % 10 == 0]
loss_values_sampled = [d['loss'] for d in log_data if d['epoch'] % 10 == 0]

epochs_bleu_sampled = [d['epoch'] for d in bleu_data if d['epoch'] % 10 == 0]
bleu_scores_sampled = [d['bleu_score'] for d in bleu_data if d['epoch'] % 10 == 0]

# Create a figure with two subplots
fig, (ax1, ax2) = plt.subplots(2, 1, figsize=(10, 12))

# Plot training loss
ax1.plot(epochs_sampled, loss_values_sampled, marker='o', linestyle='-', color='#1f77b4', label='Training Loss')
ax1.set_title('Training Loss over 200 Epochs (Sampled)', fontsize=16)
ax1.set_xlabel('Epoch', fontsize=12)
ax1.set_ylabel('Loss', fontsize=12)
ax1.grid(True, linestyle='--', alpha=0.6)
ax1.legend()

# Plot BLEU score
ax2.plot(epochs_bleu_sampled, bleu_scores_sampled, marker='o', linestyle='-', color='#ff7f0e', label='BLEU Score')
ax2.set_title('BLEU Score over 200 Epochs (Sampled)', fontsize=16)
ax2.set_xlabel('Epoch', fontsize=12)
ax2.set_ylabel('BLEU Score', fontsize=12)
ax2.grid(True, linestyle='--', alpha=0.6)
ax2.legend()

plt.tight_layout()
plt.show()